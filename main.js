!function(){"use strict";var t={d:function(e,n){for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}};function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(i)?i:String(i)),o)}var i}t.d({},{Q9:function(){return V},cd:function(){return x},$f:function(){return R}});var r=function(){function t(e,n){var r=e.data,o=e.handleCardClick;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._title=r.title,this._link=r.link,this._selector=n,this._handleCardClick=o}var e,r;return e=t,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._selector).content.querySelector(".element").cloneNode(!0)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(".element__image").src=this._link,this._element.querySelector(".element__name").textContent=this._title,this._element}},{key:"_toggleLike",value:function(){this._element.querySelector(".element__like").classList.toggle("element__liked")}},{key:"_handleDelete",value:function(t){t.target.closest(".element").remove()}},{key:"_setEventListeners",value:function(){var t=this;this._element.querySelector(".element__like").addEventListener("click",(function(){t._toggleLike()})),this._element.querySelector(".element__trash").addEventListener("click",this._handleDelete),this._element.querySelector(".element__image").addEventListener("click",(function(){t._handleCardClick(t._title,t._link)}))}}])&&n(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===o(i)?i:String(i)),r)}var i}var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popupElement=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this),this._setEventListeners()}var e,n;return e=t,(n=[{key:"open",value:function(){this._popupElement.style.display="block",console.log("abrie",this._popupElement),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.style.display="none",document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}},{key:"_setEventListeners",value:function(){var t=this;this._popupElement.addEventListener("click",(function(e){(e.target.classList.contains("popup")||e.target.classList.contains("popup__close-image"))&&t.close()}))}}])&&i(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==l(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===l(o)?o:String(o)),r)}var o}function a(){return a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},a.apply(this,arguments)}function s(t,e){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},s(t,e)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},p(t)}var y=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=p(r);if(o){var n=p(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===l(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return f(t)}(this,t)});function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._submitCallback=e.bind(f(n)),n}return e=u,(n=[{key:"close",value:function(){a(p(u.prototype),"close",this).call(this)}},{key:"_setEventListeners",value:function(){var t=this;a(p(u.prototype),"_setEventListeners",this).call(this),this._formElement=this._popupElement.querySelector(".form"),this._formElement.addEventListener("submit",(function(e){e.preventDefault(),t._submitCallback(t._getInputValues()),e.target.reset(),t.close()}))}},{key:"_getInputValues",value:function(){var t=this;return this._inputElements=this._popupElement.querySelectorAll(".form__submit"),this._formValues={},this._inputElements.forEach((function(e){t._formValues[e.name]=e.value})),this._formValues}}])&&c(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(u);function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,h(r.key),r)}}function v(t,e,n){return(e=h(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t){var e=function(t,e){if("object"!==m(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===m(e)?e:String(e)}var _=function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),v(this,"_showInputError",(function(t,e){var n=r._form.querySelector(".".concat(t.id,"-error"));t.classList.add(r._inputErrorClass),n.textContent=e,n.classList.add(r._errorClass)})),v(this,"_hideInputError",(function(t){var e=r._form.querySelector(".".concat(t.id,"-error"));t.classList.remove(r._inputErrorClass),e.classList.remove(r._errorClass),e.textContent=""})),v(this,"_checkInputValidity",(function(t){t.validity.valid?r._hideInputError(t):r._showInputError(t,t.validationMessage)})),this._form=e,this._inputSelector=n.inputSelector,this._submitButtonSelector=n.submitButtonSelector,this._inactiveButtonClass=n.inactiveButtonClass,this._buttonImage=n._buttonImage,this._buttonProfile=n._buttonProfile,this._inputErrorClass=n.inputErrorClass,this._errorClass=n.errorClass}var e,n;return e=t,(n=[{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this._submitButton.classList.remove(this._buttonImage),this._submitButton.classList.remove(this._buttonProfile),this._submitButton.classList.add(this._inactiveButtonClass)):(this._submitButton.classList.add(this._buttonImage),this._submitButton.classList.add(this._buttonProfile),this._submitButton.classList.remove(this._inactiveButtonClass))}},{key:"doubleFunctions",value:function(t){this._checkInputValidity(t),this._toggleButtonState()}},{key:"_setEventListeners",value:function(){var t=this;this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._submitButton=this._form.querySelector(this._submitButtonSelector),this._form.addEventListener("submit",(function(t){t.preventDefault()})),this._inputList.forEach((function(e){e.addEventListener("input",(function(){t.doubleFunctions(e)}))})),this._toggleButtonState()}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&b(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==d(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===d(o)?o:String(o)),r)}var o}function S(){return S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=E(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},S.apply(this,arguments)}function w(t,e){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},w(t,e)}function E(t){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},E(t)}var k=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&w(t,e)}(u,t);var e,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=E(r);if(o){var n=E(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===d(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),i.call(this,t)}return e=u,(n=[{key:"open",value:function(t,e){this._popupElement.querySelector(".popup__size-image").src=e,this._popupElement.querySelector(".popup__footer").textContent=t,S(E(u.prototype),"open",this).call(this)}},{key:"close",value:function(){S(E(u.prototype),"close",this).call(this)}}])&&g(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(u);function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==j(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===j(o)?o:String(o)),r)}var o}var C=function(){function t(e,n){var r=e.items,o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderItems=r,this._renderer=o,this._container=document.querySelector(n)}var e,n;return e=t,(n=[{key:"renderItems",value:function(){var t=this;this._renderItems.forEach((function(e){t._renderer(e)}))}},{key:"setItem",value:function(t){this._container.prepend(t)}}])&&P(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==O(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===O(o)?o:String(o)),r)}var o}var q=function(){function t(e){var n=e.uName,r=e.uJob;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._uName=document.querySelector(n),this._uJob=document.querySelector(r)}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{uName:this._uName.textContent,uJob:this._uJob.textContent}}},{key:"setUserInfo",value:function(t){var e=t.uName,n=t.uJob;this._uName.textContent=e,this._uJob.textContent=n}}])&&L(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),I={form:".form",inputSelector:".form__input",submitButtonSelector:".form__submit",inactiveButtonClass:".popup__save-white",buttonImage:".popupimage__save",buttonProfile:".popupprofile__save",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"},B=document.querySelectorAll(".popupprofile__form");document.querySelector(".popup__close-button"),B.forEach((function(t){new _(t,I).enableValidation()}));var x=new y("#popupProfile",(function(){var t=document.querySelector(".popupprofile__name"),e=document.querySelector(".popupprofile__job");document.querySelector(".profile__name").textContent=t.value,document.querySelector(".profile__explorador").textContent=e.value,x.close()})),T=new y("#popupImage",(function(t){var e=document.querySelector(".popupimage__form"),n=e.querySelector(".popupimage__name").value,o=e.querySelector(".popupimage__job").value,i=new r({data:{title:n,link:o},handleCardClick:function(t,e){R.open(t,e)}},"#template").generateCard();V.setItem(i)})),R=new k("#imageOpen"),V=new C({items:[{title:"Valle de Yosemite",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{title:"Lago Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{title:"MontaÃ±as Calvas",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{title:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{title:"Parque Nacional de la Vanoise",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{title:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:function(t){var e=new r({data:t,handleCardClick:function(t,e){R.open(t,e)}},"#template").generateCard();V.setItem(e)}},".elements");V.renderItems(),new q({uName:".profile__name",uJob:".profile__explorador"}).getUserInfo(),document.querySelector("#openImage").addEventListener("click",(function(t){t.preventDefault(),T.open()})),document.querySelector("#openProfile").addEventListener("click",(function(t){t.preventDefault(),x.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoieUJBQ0EsSUFBSUEsRUFBc0IsQ0NBMUJBLEVBQXdCLFNBQVNDLEVBQVNDLEdBQ3pDLElBQUksSUFBSUMsS0FBT0QsRUFDWEYsRUFBb0JJLEVBQUVGLEVBQVlDLEtBQVNILEVBQW9CSSxFQUFFSCxFQUFTRSxJQUM1RUUsT0FBT0MsZUFBZUwsRUFBU0UsRUFBSyxDQUFFSSxZQUFZLEVBQU1DLElBQUtOLEVBQVdDLElBRzNFLEVDUEFILEVBQXdCLFNBQVNTLEVBQUtDLEdBQVEsT0FBT0wsT0FBT00sVUFBVUMsZUFBZUMsS0FBS0osRUFBS0MsRUFBTyxHLHl2QkNBakZJLEVBQUksV0FDdkIsU0FBQUEsRUFBQUMsRUFBcUNDLEdBQVMsSUFBakNDLEVBQUlGLEVBQUpFLEtBQU1DLEVBQWVILEVBQWZHLGlCLDRGQUFlQyxDQUFBLEtBQUFMLEdBQ2hDTSxLQUFLQyxPQUFTSixFQUFLSyxNQUNuQkYsS0FBS0csTUFBUU4sRUFBS08sS0FDbEJKLEtBQUtLLFVBQVlULEVBQ2pCSSxLQUFLTSxpQkFBbUJSLENBQzVCLEMsUUFvQ0csTyxFQXBDRkosRyxFQUFBLEVBQUFYLElBQUEsZUFBQXdCLE1BRUMsV0FFSSxPQURjQyxTQUFTQyxjQUFjVCxLQUFLSyxXQUFXSyxRQUFRRCxjQUFjLFlBQVlFLFdBQVUsRUFFckcsR0FBQyxDQUFBNUIsSUFBQSxlQUFBd0IsTUFFRCxXQUtJLE9BSkZQLEtBQUtZLFNBQVdaLEtBQUthLGVBQ3JCYixLQUFLYyxxQkFDTGQsS0FBS1ksU0FBU0gsY0FBYyxtQkFBbUJNLElBQU1mLEtBQUtHLE1BQzFESCxLQUFLWSxTQUFTSCxjQUFjLGtCQUFrQk8sWUFBY2hCLEtBQUtDLE9BQ3hERCxLQUFLWSxRQUNsQixHQUFDLENBQUE3QixJQUFBLGNBQUF3QixNQUVDLFdBQ3FCUCxLQUFLWSxTQUFTSCxjQUFjLGtCQUNsQ1EsVUFBVUMsT0FBTyxpQkFDbEMsR0FBQyxDQUFBbkMsSUFBQSxnQkFBQXdCLE1BRUMsU0FBY1ksR0FDS0EsRUFBTUMsT0FBT0MsUUFBUSxZQUMzQkMsUUFDZixHQUFDLENBQUF2QyxJQUFBLHFCQUFBd0IsTUFFQyxXQUFxQixJQUFBZ0IsRUFBQSxLQUNuQnZCLEtBQUtZLFNBQVNILGNBQWMsa0JBQWtCZSxpQkFBaUIsU0FBUyxXQUN0RUQsRUFBS0UsYUFDUCxJQUNjekIsS0FBS1ksU0FBU0gsY0FBYyxtQkFDcENlLGlCQUFpQixRQUFTeEIsS0FBSzBCLGVBQ3JDMUIsS0FBS1ksU0FBU0gsY0FBYyxtQkFBbUJlLGlCQUFpQixTQUFTLFdBQ3ZFRCxFQUFLakIsaUJBQ0xpQixFQUFLdEIsT0FDTHNCLEVBQUtwQixNQUNQLEdBQ0YsTSxvRUFBQ1QsQ0FBQSxDQTFDc0IsRyx1cUJDQUppQyxFQUFLLFdBQ3RCLFNBQUFBLEVBQVlDLEksNEZBQWU3QixDQUFBLEtBQUE0QixHQUN6QjNCLEtBQUs2QixjQUFnQnJCLFNBQVNDLGNBQWNtQixHQUM1QzVCLEtBQUs4QixnQkFBa0I5QixLQUFLOEIsZ0JBQWdCQyxLQUFLL0IsTUFDakRBLEtBQUtjLG9CQUNQLEMsUUE4QkMsTyxFQTlCQWEsRyxFQUFBLEVBQUE1QyxJQUFBLE9BQUF3QixNQUVELFdBRUVQLEtBQUs2QixjQUFjRyxNQUFNQyxRQUFVLFFBQ25DQyxRQUFRQyxJQUFJLFFBQVduQyxLQUFLNkIsZUFDNUJyQixTQUFTZ0IsaUJBQWlCLFVBQVd4QixLQUFLOEIsZ0JBQzlDLEdBQUMsQ0FBQS9DLElBQUEsUUFBQXdCLE1BRUMsV0FDRVAsS0FBSzZCLGNBQWNHLE1BQU1DLFFBQVUsT0FDbkN6QixTQUFTNEIsb0JBQW9CLFVBQVdwQyxLQUFLOEIsZ0JBRS9DLEdBQUMsQ0FBQS9DLElBQUEsa0JBQUF3QixNQUVELFNBQWdCOEIsR0FDRSxXQUFaQSxFQUFJdEQsS0FDTmlCLEtBQUtzQyxPQUVULEdBQUMsQ0FBQXZELElBQUEscUJBQUF3QixNQUVELFdBQXFCLElBQUFnQixFQUFBLEtBQ25CdkIsS0FBSzZCLGNBQWNMLGlCQUFpQixTQUFTLFNBQUNhLElBRTFDQSxFQUFJakIsT0FBT0gsVUFBVXNCLFNBQVMsVUFDOUJGLEVBQUlqQixPQUFPSCxVQUFVc0IsU0FBUyx3QkFFOUJoQixFQUFLZSxPQUVULEdBQ0YsTSxvRUFBQ1gsQ0FBQSxDQW5DcUIsRywyMkNDQUssSUFFVmEsRUFBYSxTQUFBQyxJLHFSQUFBQyxDQUFBRixFQUFBQyxHQUFBLEksUUFBQUUsRyxFQUFBSCxFLDZqQkFDaEMsU0FBQUEsRUFBWVosRUFBZWdCLEdBQWdCLElBQUFyQixFQUVRLE8sNEZBRlJ4QixDQUFBLEtBQUF5QyxJQUN6Q2pCLEVBQUFvQixFQUFBbEQsS0FBQSxLQUFNbUMsSUFDRGlCLGdCQUFrQkQsRUFBZWIsS0FBSWUsRUFBQXZCLElBQU9BLENBQ25ELENBd0JDLE8sRUF4QkFpQixHLEVBQUEsRUFBQXpELElBQUEsUUFBQXdCLE1BRUQsV0FDRXdDLEVBQUFDLEVBQUFSLEVBQUFqRCxXQUFBLGNBQUFFLEtBQUEsS0FDRixHQUFDLENBQUFWLElBQUEscUJBQUF3QixNQUVELFdBQXFCLElBQUEwQyxFQUFBLEtBQ25CRixFQUFBQyxFQUFBUixFQUFBakQsV0FBQSwyQkFBQUUsS0FBQSxNQUNBTyxLQUFLa0QsYUFBZWxELEtBQUs2QixjQUFjcEIsY0FBYyxTQUNyRFQsS0FBS2tELGFBQWExQixpQkFBaUIsVUFBVSxTQUFDYSxHQUM1Q0EsRUFBSWMsaUJBQ0pGLEVBQUtKLGdCQUFnQkksRUFBS0csbUJBQzFCZixFQUFJakIsT0FBT2lDLFFBQ1hKLEVBQUtYLE9BQ1AsR0FDRixHQUFDLENBQUF2RCxJQUFBLGtCQUFBd0IsTUFFRCxXQUFrQixJQUFBK0MsRUFBQSxLQU1oQixPQUxBdEQsS0FBS3VELGVBQWlCdkQsS0FBSzZCLGNBQWMyQixpQkFBaUIsaUJBQzFEeEQsS0FBS3lELFlBQWMsQ0FBQyxFQUNwQnpELEtBQUt1RCxlQUFlRyxTQUFRLFNBQUNDLEdBQzNCTCxFQUFLRyxZQUFZRSxFQUFNQyxNQUFRRCxFQUFNcEQsS0FDdkMsSUFDT1AsS0FBS3lELFdBQ2QsTSxvRUFBQ2pCLENBQUEsQ0E1QitCLENBQVNiLEcsbXpCQ0Z0QmtDLEVBQWEsV0FDaEMsU0FBQUEsRUFBWUMsRUFBTUMsR0FBVSxJQUFBeEMsRUFBQSxNLDRGQUFBeEIsQ0FBQSxLQUFBOEQsR0FBQUcsRUFBQSx3QkFXWCxTQUFDQyxFQUFjQyxHQUM5QixJQUFNQyxFQUFlNUMsRUFBSzZDLE1BQU0zRCxjQUFjLElBQUQ0RCxPQUFLSixFQUFhSyxHQUFFLFdBQ2pFTCxFQUFhaEQsVUFBVXNELElBQUloRCxFQUFLaUQsa0JBQ2hDTCxFQUFhbkQsWUFBY2tELEVBQzNCQyxFQUFhbEQsVUFBVXNELElBQUloRCxFQUFLa0QsWUFDbEMsSUFBQ1QsRUFBQSx3QkFFaUIsU0FBQ0MsR0FDakIsSUFBTUUsRUFBZTVDLEVBQUs2QyxNQUFNM0QsY0FBYyxJQUFENEQsT0FBS0osRUFBYUssR0FBRSxXQUNqRUwsRUFBYWhELFVBQVVLLE9BQU9DLEVBQUtpRCxrQkFDbkNMLEVBQWFsRCxVQUFVSyxPQUFPQyxFQUFLa0QsYUFDbkNOLEVBQWFuRCxZQUFjLEVBQzdCLElBQUNnRCxFQUFBLDRCQUVxQixTQUFDQyxHQUNoQkEsRUFBYVMsU0FBU0MsTUFHekJwRCxFQUFLcUQsZ0JBQWdCWCxHQUZyQjFDLEVBQUtzRCxnQkFBZ0JaLEVBQWNBLEVBQWFhLGtCQUlwRCxJQTlCQTlFLEtBQUtvRSxNQUFRTixFQUNiOUQsS0FBSytFLGVBQWlCaEIsRUFBVWlCLGNBQ2hDaEYsS0FBS2lGLHNCQUF3QmxCLEVBQVVtQixxQkFDdkNsRixLQUFLbUYscUJBQXVCcEIsRUFBVXFCLG9CQUN0Q3BGLEtBQUtxRixhQUFldEIsRUFBVXNCLGFBQzlCckYsS0FBS3NGLGVBQWlCdkIsRUFBVXVCLGVBQ2hDdEYsS0FBS3dFLGlCQUFtQlQsRUFBVXdCLGdCQUNsQ3ZGLEtBQUt5RSxZQUFjVixFQUFVeUIsVUFDN0IsQyxRQStEQyxPLEVBL0RBM0IsRyxFQUFBLEVBQUE5RSxJQUFBLG1CQUFBd0IsTUF3QkQsV0FDRSxPQUFPUCxLQUFLeUYsV0FBV0MsTUFBSyxTQUFDekIsR0FDM0IsT0FBUUEsRUFBYVMsU0FBU0MsS0FDaEMsR0FDRixHQUFDLENBQUE1RixJQUFBLHFCQUFBd0IsTUFFRCxXQUNNUCxLQUFLMkYsb0JBQ1AzRixLQUFLNEYsY0FBYzNFLFVBQVVLLE9BQU90QixLQUFLcUYsY0FDekNyRixLQUFLNEYsY0FBYzNFLFVBQVVLLE9BQU90QixLQUFLc0YsZ0JBQ3pDdEYsS0FBSzRGLGNBQWMzRSxVQUFVc0QsSUFBSXZFLEtBQUttRix3QkFFdENuRixLQUFLNEYsY0FBYzNFLFVBQVVzRCxJQUFJdkUsS0FBS3FGLGNBQ3RDckYsS0FBSzRGLGNBQWMzRSxVQUFVc0QsSUFBSXZFLEtBQUtzRixnQkFDdEN0RixLQUFLNEYsY0FBYzNFLFVBQVVLLE9BQU90QixLQUFLbUYsc0JBRTdDLEdBQUMsQ0FBQXBHLElBQUEsa0JBQUF3QixNQUVBLFNBQWdCMEQsR0FDYmpFLEtBQUs2RixvQkFBb0I1QixHQUN6QmpFLEtBQUs4RixvQkFDUCxHQUFDLENBQUEvRyxJQUFBLHFCQUFBd0IsTUFFSixXQUFxQixJQUFBMEMsRUFBQSxLQUNsQmpELEtBQUt5RixXQUFhTSxNQUFNQyxLQUFLaEcsS0FBS29FLE1BQU1aLGlCQUFpQnhELEtBQUsrRSxpQkFDOUQvRSxLQUFLNEYsY0FBZ0I1RixLQUFLb0UsTUFBTTNELGNBQWNULEtBQUtpRix1QkFDbkRqRixLQUFLb0UsTUFBTTVDLGlCQUFpQixVQUFVLFNBQUNhLEdBQ3JDQSxFQUFJYyxnQkFDTixJQUNBbkQsS0FBS3lGLFdBQVcvQixTQUFRLFNBQUNPLEdBQ3ZCQSxFQUFhekMsaUJBQWlCLFNBQVMsV0FDckN5QixFQUFLZ0QsZ0JBQWdCaEMsRUFDdkIsR0FDRixJQUNBakUsS0FBSzhGLG9CQUNQLEdBQUMsQ0FBQS9HLElBQUEsbUJBQUF3QixNQUVELFdBQ0VQLEtBQUtjLG9CQUNQLE0sb0VBQUMrQyxDQUFBLENBekUrQixHLGd2Q0NBSCxJQUVUcUMsRUFBYyxTQUFBekQsSSxxUkFBQUMsQ0FBQXdELEVBQUF6RCxHQUFBLEksUUFBQUUsRyxFQUFBdUQsRSxxckJBQ2xDLFNBQUFBLEVBQVl0RSxHQUFlLE8sNEZBQUE3QixDQUFBLEtBQUFtRyxHQUFBdkQsRUFBQWxELEtBQUEsS0FDbkJtQyxFQUNSLENBU0MsTyxFQVRBc0UsRyxFQUFBLEVBQUFuSCxJQUFBLE9BQUF3QixNQUVELFNBQUtMLEVBQU9FLEdBQ1ZKLEtBQUs2QixjQUFjcEIsY0FBYyxzQkFBc0JNLElBQU1YLEVBQzdESixLQUFLNkIsY0FBY3BCLGNBQWMsa0JBQWtCTyxZQUFjZCxFQUMvRDZDLEVBQUFDLEVBQUFrRCxFQUFBM0csV0FBQSxhQUFBRSxLQUFBLEtBQ0osR0FBQyxDQUFBVixJQUFBLFFBQUF3QixNQUNELFdBQ0V3QyxFQUFBQyxFQUFBa0QsRUFBQTNHLFdBQUEsY0FBQUUsS0FBQSxLQUNGLE0sb0VBQUN5RyxDQUFBLENBWmlDLENBQVN2RSxHLHVxQkNGeEJ3RSxFQUFPLFdBQzFCLFNBQUFBLEVBQUF4RyxFQUErQnlHLEdBQW1CLElBQXJDQyxFQUFLMUcsRUFBTDBHLE1BQU9DLEVBQVEzRyxFQUFSMkcsVSw0RkFBUXZHLENBQUEsS0FBQW9HLEdBQzFCbkcsS0FBS3VHLGFBQWVGLEVBQ3BCckcsS0FBS3dHLFVBQVlGLEVBQ2pCdEcsS0FBS3lHLFdBQWFqRyxTQUFTQyxjQUFjMkYsRUFDM0MsQyxRQVNDLE8sRUFUQUQsRyxFQUFBLEVBQUFwSCxJQUFBLGNBQUF3QixNQUVELFdBQWMsSUFBQWdCLEVBQUEsS0FDWnZCLEtBQUt1RyxhQUFhN0MsU0FBUSxTQUFDZ0QsR0FDekJuRixFQUFLaUYsVUFBVUUsRUFDakIsR0FDRixHQUFDLENBQUEzSCxJQUFBLFVBQUF3QixNQUNELFNBQVFtRyxHQUNOMUcsS0FBS3lHLFdBQVdFLFFBQVFELEVBQzFCLE0sb0VBQUNQLENBQUEsQ0FkeUIsRyx1cUJDQVBTLEVBQVEsV0FDM0IsU0FBQUEsRUFBQWpILEdBQTJCLElBQWRrSCxFQUFLbEgsRUFBTGtILE1BQU9DLEVBQUluSCxFQUFKbUgsTSw0RkFBSS9HLENBQUEsS0FBQTZHLEdBQ3RCNUcsS0FBSytHLE9BQVN2RyxTQUFTQyxjQUFjb0csR0FDckM3RyxLQUFLZ0gsTUFBUXhHLFNBQVNDLGNBQWNxRyxFQUN0QyxDLFFBYUMsTyxFQWJBRixHLEVBQUEsRUFBQTdILElBQUEsY0FBQXdCLE1BRUQsV0FDRSxNQUFPLENBQ0xzRyxNQUFPN0csS0FBSytHLE9BQU8vRixZQUNuQjhGLEtBQU05RyxLQUFLZ0gsTUFBTWhHLFlBRXJCLEdBQUMsQ0FBQWpDLElBQUEsY0FBQXdCLE1BRUQsU0FBWVYsR0FDVixJQUFPZ0gsRUFBZWhILEVBQWZnSCxNQUFPQyxFQUFRakgsRUFBUmlILEtBQ2Q5RyxLQUFLK0csT0FBTy9GLFlBQWM2RixFQUMxQjdHLEtBQUtnSCxNQUFNaEcsWUFBYzhGLENBQzNCLE0sb0VBQUNGLENBQUEsQ0FqQjBCLEdDOEJoQjdDLEVBQVksQ0FDdkJELEtBQU0sUUFDTmtCLGNBQWUsZUFDZkUscUJBQXNCLGdCQUN0QkUsb0JBQXFCLHFCQUNyQjZCLFlBQWEsb0JBQ2JDLGNBQWdCLHNCQUNoQjNCLGdCQUFpQix5QkFDakJDLFdBQVksNEJBR0QyQixFQUFnQjNHLFNBQVNnRCxpQkFBaUIsdUJBQ3ZCaEQsU0FBU0MsY0FBYyx3QkNoQ3ZEMEcsRUFBY3pELFNBQVEsU0FBQ0ksR0FDRyxJQUFJRCxFQUFjQyxFQUFNQyxHQUNoQ3FELGtCQUNoQixJQUVPLElBQU1DLEVBQWUsSUFBSTdFLEVBQWMsaUJEOEJ6QyxXQUNMLElBQU04RSxFQUFZOUcsU0FBU0MsY0FBYyx1QkFDbkM4RyxFQUFXL0csU0FBU0MsY0FBYyxzQkFDeENELFNBQVNDLGNBQWMsa0JBQWtCTyxZQUFjc0csRUFBVS9HLE1BQ2pFQyxTQUFTQyxjQUFjLHdCQUF3Qk8sWUFBY3VHLEVBQVNoSCxNQUN0RThHLEVBQWEvRSxPQUNmLElDbkNla0YsRUFBZ0IsSUFBSWhGLEVBQWMsZURxQzFDLFNBQTJCSCxHQUNoQyxJQUFNb0YsRUFBY2pILFNBQVNDLGNBQWMscUJBQ3JDUCxFQUFRdUgsRUFBWWhILGNBQWMscUJBQXFCRixNQUN2REgsRUFBT3FILEVBQVloSCxjQUFjLG9CQUFvQkYsTUFZckRtSCxFQVZVLElBQUloSSxFQUNsQixDQUNFRyxLQUhTLENBQUNLLE1BQUFBLEVBQU9FLEtBQUFBLEdBSWpCTixnQkFBaUIsU0FBQ0ksRUFBT0UsR0FDdkJ1SCxFQUFhQyxLQUFLMUgsRUFBT0UsRUFDM0IsR0FFRixhQUdtQnlILGVBQ3JCQyxFQUFlQyxRQUFRTCxFQUN6QixJQ3JEZUMsRUFBZSxJQUFJekIsRUFBZSxjQUVwQzRCLEVBQWlCLElBQUkzQixFQUNoQyxDQUNFRSxNRGxCd0IsQ0FDMUIsQ0FDRW5HLE1BQU8sb0JBQ1BFLEtBQU0sb0RBRVIsQ0FDRUYsTUFBTyxjQUNQRSxLQUFNLHVEQUVSLENBQ0VGLE1BQU8sa0JBQ1BFLEtBQU0sMERBRVIsQ0FDRUYsTUFBTyxVQUNQRSxLQUFNLG1EQUVSLENBQ0VGLE1BQU8sZ0NBQ1BFLEtBQU0sbURBRVIsQ0FDRUYsTUFBTyxpQkFDUEUsS0FBTSxpRENKTmtHLFNBQVUsU0FBQ3pHLEdBQ1QsSUFTTW1JLEVBVFUsSUFBSXRJLEVBQ2xCLENBQ0VHLEtBQUFBLEVBQ0FDLGdCQUFpQixTQUFDSSxFQUFPK0gsR0FDdkJOLEVBQWFDLEtBQUsxSCxFQUFPK0gsRUFDM0IsR0FFRixhQUUwQkosZUFDNUJDLEVBQWVDLFFBQVFDLEVBQ3pCLEdBRUYsYUFFRkYsRUFBZUksY0FFSyxJQUFJdEIsRUFBUyxDQUMvQkMsTUFBTyxpQkFDUEMsS0FBTSx5QkFHSXFCLGNBRU0zSCxTQUFTQyxjQUFjLGNBQy9CZSxpQkFBaUIsU0FBUyxTQUFDYSxHQUNuQ0EsRUFBSWMsaUJBQ0pxRSxFQUFjSSxNQUNoQixJQUVvQnBILFNBQVNDLGNBQWMsZ0JBQy9CZSxpQkFBaUIsU0FBUyxTQUFDYSxHQUNyQ0EsRUFBSWMsaUJBQ0prRSxFQUFhTyxNQUNmLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudC9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50L1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50L1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnQvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudC9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudC9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50L1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50L3V0aWxzL1V0aWxzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIGRlZmluaXRpb24pIHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqLCBwcm9wKSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTsgfSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKHtkYXRhLCBoYW5kbGVDYXJkQ2xpY2t9LCBzZWxlY3Rvcil7XHJcbiAgICB0aGlzLl90aXRsZSA9IGRhdGEudGl0bGU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fc2VsZWN0b3IgPSBzZWxlY3RvcjtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxufVxyXG4gICAgICBcclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvcikuY29udGVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudCcpLmNsb25lTm9kZSh0cnVlKTtcclxuICAgICAgcmV0dXJuIGVsZW1lbnQ7IFxyXG4gIH1cclxuICAgICAgXHJcbiAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2ltYWdlXCIpLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbmFtZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX3RpdGxlO1xyXG4gICAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxufVxyXG5cclxuICBfdG9nZ2xlTGlrZSgpIHtcclxuICAgIGNvbnN0IGxpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbGlrZVwiKTtcclxuICAgICAgbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiZWxlbWVudF9fbGlrZWRcIik7XHJcbn0gXHJcblxyXG4gIF9oYW5kbGVEZWxldGUoZXZlbnQpe1xyXG4gICAgY29uc3QgbGlzdEl0ZW0gPSBldmVudC50YXJnZXQuY2xvc2VzdChcIi5lbGVtZW50XCIpO1xyXG4gICAgICBsaXN0SXRlbS5yZW1vdmUoKTtcclxufVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7IFxyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2xpa2VcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5fdG9nZ2xlTGlrZSgpO1xyXG4gICAgfSk7XHJcbiAgICBjb25zdCB0cmFzaCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X190cmFzaFwiKTtcclxuICAgIHRyYXNoLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVEZWxldGUpO1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2ltYWdlXCIpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soXHJcbiAgICAgIHRoaXMuX3RpdGxlLFxyXG4gICAgICB0aGlzLl9saW5rKTsgICAgIFxyXG4gICAgfSk7XHJcbiAgfTtcclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuICBcclxuICAgIG9wZW4oKSB7XHJcbiAgICAgIFxyXG4gICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgICAgY29uc29sZS5sb2coJ2FicmllJywgICB0aGlzLl9wb3B1cEVsZW1lbnQpO1xyXG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuICBcclxuICAgIGNsb3NlKCkge1xyXG4gICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiIDtcclxuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgICAgXHJcbiAgICB9XHJcbiAgXHJcbiAgICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XHJcbiAgICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXAnKSB8fFxyXG4gICAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZS1pbWFnZScpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfSBcclxuICAgICAgfSk7XHJcbiAgICB9ICBcclxuXHJcbiAgICB9XHJcbiAgIFxyXG5cclxuICIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBzdWJtaXRDYWxsYmFjaykge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9zdWJtaXRDYWxsYmFjayA9IHN1Ym1pdENhbGxiYWNrLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKTtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdENhbGxiYWNrKHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICBldnQudGFyZ2V0LnJlc2V0KCk7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cyA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX3N1Ym1pdFwiKTtcclxuICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcclxuICB9XHJcbn1cclxuXHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3J7XHJcbiAgY29uc3RydWN0b3IoZm9ybSwgc2VsZWN0b3JzKXtcclxuICB0aGlzLl9mb3JtID0gZm9ybTtcclxuICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2VsZWN0b3JzLmlucHV0U2VsZWN0b3I7XHJcbiAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZWxlY3RvcnMuc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNlbGVjdG9ycy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gIHRoaXMuX2J1dHRvbkltYWdlID0gc2VsZWN0b3JzLl9idXR0b25JbWFnZTtcclxuICB0aGlzLl9idXR0b25Qcm9maWxlID0gc2VsZWN0b3JzLl9idXR0b25Qcm9maWxlO1xyXG4gIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNlbGVjdG9ycy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgdGhpcy5fZXJyb3JDbGFzcyA9IHNlbGVjdG9ycy5lcnJvckNsYXNzO1xyXG4gIH1cclxuXHJcbiBfc2hvd0lucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpID0+IHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH07XHJcbiAgXHJcbiAgX2hpZGVJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH07XHJcbiAgXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eSA9IChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfTtcclxuICBcclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2J1dHRvbkltYWdlKTsgXHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2J1dHRvblByb2ZpbGUpOyBcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7IFxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5fYnV0dG9uSW1hZ2UpOyBcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5fYnV0dG9uUHJvZmlsZSk7IFxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTsgXHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gICBkb3VibGVGdW5jdGlvbnMoaW5wdXRFbGVtZW50KSB7XHJcbiAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgfVxyXG4gIFxyXG4gX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcikpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5kb3VibGVGdW5jdGlvbnMoaW5wdXRFbGVtZW50KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuIGV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgb3Blbih0aXRsZSwgbGluaykge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3NpemUtaW1hZ2VcIikuc3JjID0gbGluaztcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb290ZXJcIikudGV4dENvbnRlbnQgPSB0aXRsZTtcclxuICAgICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuXHJcblxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7aXRlbXMsIHJlbmRlcmVyfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3JlbmRlckl0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX3JlbmRlckl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgc2V0SXRlbShpdGVtKSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChpdGVtKTtcclxuICB9XHJcbn1cclxuXHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7dU5hbWUsIHVKb2J9KSB7XHJcbiAgICB0aGlzLl91TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodU5hbWUpO1xyXG4gICAgdGhpcy5fdUpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodUpvYik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHVOYW1lOiB0aGlzLl91TmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgdUpvYjogdGhpcy5fdUpvYi50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhkYXRhKSB7XHJcbiAgICBjb25zdCB7dU5hbWUsIHVKb2J9ID0gZGF0YTtcclxuICAgIHRoaXMuX3VOYW1lLnRleHRDb250ZW50ID0gdU5hbWU7XHJcbiAgICB0aGlzLl91Sm9iLnRleHRDb250ZW50ID0gdUpvYjtcclxuICB9XHJcbn0iLCJpbXBvcnQge25ld1BvcHVwSW5mbywgaW5pdGlhbFNlY3Rpb24sIHByZXZpZXdQb3B1cH0gZnJvbSBcIi4uLy4uL2luZGV4LmpzXCJcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uLy4uL2NvbXBvbmVudC9DYXJkLmpzXCJcclxuXHJcbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgdGl0bGU6IFwiVmFsbGUgZGUgWW9zZW1pdGVcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUveW9zZW1pdGUuanBnXCJcclxuICB9LFxyXG4gIHtcclxuICAgIHRpdGxlOiBcIkxhZ28gTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZ1wiXHJcbiAgfSxcclxuICB7XHJcbiAgICB0aXRsZTogXCJNb250YcOxYXMgQ2FsdmFzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2JhbGQtbW91bnRhaW5zLmpwZ1wiXHJcbiAgfSxcclxuICB7XHJcbiAgICB0aXRsZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhdGVtYXIuanBnXCJcclxuICB9LFxyXG4gIHtcclxuICAgIHRpdGxlOiBcIlBhcnF1ZSBOYWNpb25hbCBkZSBsYSBWYW5vaXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3Zhbm9pc2UuanBnXCJcclxuICB9LFxyXG4gIHtcclxuICAgIHRpdGxlOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhZ28uanBnXCJcclxuICB9XHJcbl07XHJcblxyXG5leHBvcnQgY29uc3Qgc2VsZWN0b3JzID0ge1xyXG4gIGZvcm06IFwiLmZvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19zdWJtaXRcIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIi5wb3B1cF9fc2F2ZS13aGl0ZVwiLFxyXG4gIGJ1dHRvbkltYWdlOiBcIi5wb3B1cGltYWdlX19zYXZlXCIsXHJcbiAgYnV0dG9uUHJvZmlsZSA6IFwiLnBvcHVwcHJvZmlsZV9fc2F2ZVwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJmb3JtX19pbnB1dC1lcnJvcl9hY3RpdmVcIixcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBmb3Jtc0VsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwcHJvZmlsZV9fZm9ybScpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBDbG9zZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlLWJ1dHRvblwiKTtcclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlUHJvZmlsZVN1Ym1pdCgpIHtcclxuICBjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwcHJvZmlsZV9fbmFtZVwiKSBcclxuICBjb25zdCBqb2JJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBwcm9maWxlX19qb2JcIikgXHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX25hbWUnKS50ZXh0Q29udGVudCA9IG5hbWVJbnB1dC52YWx1ZTsgXHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19leHBsb3JhZG9yXCIpLnRleHRDb250ZW50ID0gam9iSW5wdXQudmFsdWU7IFxyXG4gIG5ld1BvcHVwSW5mby5jbG9zZSgpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlSW1hZ2VTdWJtaXQoZXZ0KSB7XHJcbiAgY29uc3QgYWRkRm9ybUNhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwaW1hZ2VfX2Zvcm1cIik7XHJcbiAgY29uc3QgdGl0bGUgPSBhZGRGb3JtQ2FyZC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwaW1hZ2VfX25hbWVcIikudmFsdWU7XHJcbiAgY29uc3QgbGluayA9IGFkZEZvcm1DYXJkLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBpbWFnZV9fam9iXCIpLnZhbHVlO1xyXG4gIGNvbnN0IGRhdGEgPSB7dGl0bGUsIGxpbmt9O1xyXG4gIGNvbnN0IG5ld0NhcmQgPSBuZXcgQ2FyZChcclxuICAgIHtcclxuICAgICAgZGF0YSxcclxuICAgICAgaGFuZGxlQ2FyZENsaWNrOiAodGl0bGUsIGxpbmspID0+IHtcclxuICAgICAgICBwcmV2aWV3UG9wdXAub3Blbih0aXRsZSwgbGluayk7XHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgXCIjdGVtcGxhdGVcIlxyXG4gICk7XHJcblxyXG4gIGNvbnN0IGNhcmQgPSBuZXdDYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG4gIGluaXRpYWxTZWN0aW9uLnNldEl0ZW0oY2FyZCk7XHJcbn1cclxuXHJcbiIsImltcG9ydCBcIi4vcGFnZXMvaW5kZXguY3NzXCJcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4vY29tcG9uZW50L0NhcmQuanNcIlxyXG5pbXBvcnQgUG9wdXAgZnJvbSBcIi4vY29tcG9uZW50L1BvcHVwLmpzXCJcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4vY29tcG9uZW50L1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4vY29tcG9uZW50L0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuL2NvbXBvbmVudC9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi9jb21wb25lbnQvU2VjdGlvbi5qc1wiXHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi9jb21wb25lbnQvVXNlckluZm8uanNcIlxyXG5pbXBvcnQgeyBpbml0aWFsQ2FyZHMsIHNlbGVjdG9ycywgZm9ybXNFbGVtZW50cywgaGFuZGxlSW1hZ2VTdWJtaXQsIGhhbmRsZVByb2ZpbGVTdWJtaXQgfSBmcm9tIFwiLi9jb21wb25lbnQvdXRpbHMvVXRpbHMuanNcIjtcclxuXHJcbmZvcm1zRWxlbWVudHMuZm9yRWFjaCgoZm9ybSkgPT4ge1xyXG4gICAgY29uc3QgZm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm0sIHNlbGVjdG9ycyk7XHJcbiAgICBmb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICB9KTtcclxuXHJcbiAgZXhwb3J0IGNvbnN0IG5ld1BvcHVwSW5mbyA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI3BvcHVwUHJvZmlsZVwiLCBoYW5kbGVQcm9maWxlU3VibWl0KTsgXHJcbiAgZXhwb3J0IGNvbnN0IG5ld1BvcHVwSW1hZ2UgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNwb3B1cEltYWdlXCIsIGhhbmRsZUltYWdlU3VibWl0KTtcclxuICBleHBvcnQgY29uc3QgcHJldmlld1BvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI2ltYWdlT3BlblwiKTtcclxuXHJcbmV4cG9ydCBjb25zdCBpbml0aWFsU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXHJcbiAgICByZW5kZXJlcjogKGRhdGEpID0+IHtcclxuICAgICAgY29uc3QgbmV3Q2FyZCA9IG5ldyBDYXJkKFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGRhdGEsXHJcbiAgICAgICAgICBoYW5kbGVDYXJkQ2xpY2s6ICh0aXRsZSwgaW1hZ2UpID0+IHtcclxuICAgICAgICAgICAgcHJldmlld1BvcHVwLm9wZW4odGl0bGUsIGltYWdlKTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgICBcIiN0ZW1wbGF0ZVwiXHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3Q2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxuICAgICAgaW5pdGlhbFNlY3Rpb24uc2V0SXRlbShjYXJkRWxlbWVudCk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgXCIuZWxlbWVudHNcIlxyXG4pO1xyXG5pbml0aWFsU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG5cclxuY29uc3QgbmV3VXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIHVOYW1lOiBcIi5wcm9maWxlX19uYW1lXCIsXHJcbiAgdUpvYjogXCIucHJvZmlsZV9fZXhwbG9yYWRvclwiLFxyXG59KTtcclxuXHJcbm5ld1VzZXJJbmZvLmdldFVzZXJJbmZvKCk7IFxyXG5cclxuY29uc3QgZm9ybUltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNvcGVuSW1hZ2VcIik7XHJcbmZvcm1JbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcclxuICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICBuZXdQb3B1cEltYWdlLm9wZW4oKTtcclxufSk7XHJcblxyXG5jb25zdCBmb3JtUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjb3BlblByb2ZpbGVcIik7XHJcbmZvcm1Qcm9maWxlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xyXG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIG5ld1BvcHVwSW5mby5vcGVuKCk7XHJcbn0pO1xyXG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJDYXJkIiwiX3JlZiIsInNlbGVjdG9yIiwiZGF0YSIsImhhbmRsZUNhcmRDbGljayIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfdGl0bGUiLCJ0aXRsZSIsIl9saW5rIiwibGluayIsIl9zZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJ2YWx1ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfZWxlbWVudCIsIl9nZXRUZW1wbGF0ZSIsIl9zZXRFdmVudExpc3RlbmVycyIsInNyYyIsInRleHRDb250ZW50IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiZXZlbnQiLCJ0YXJnZXQiLCJjbG9zZXN0IiwicmVtb3ZlIiwiX3RoaXMiLCJhZGRFdmVudExpc3RlbmVyIiwiX3RvZ2dsZUxpa2UiLCJfaGFuZGxlRGVsZXRlIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJzdHlsZSIsImRpc3BsYXkiLCJjb25zb2xlIiwibG9nIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImNsb3NlIiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiX1BvcHVwIiwiX2luaGVyaXRzIiwiX3N1cGVyIiwic3VibWl0Q2FsbGJhY2siLCJfc3VibWl0Q2FsbGJhY2siLCJfYXNzZXJ0VGhpc0luaXRpYWxpemVkIiwiX2dldCIsIl9nZXRQcm90b3R5cGVPZiIsIl90aGlzMiIsIl9mb3JtRWxlbWVudCIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJfdGhpczMiLCJfaW5wdXRFbGVtZW50cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfZm9ybVZhbHVlcyIsImZvckVhY2giLCJpbnB1dCIsIm5hbWUiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybSIsInNlbGVjdG9ycyIsIl9kZWZpbmVQcm9wZXJ0eSIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsIl9mb3JtIiwiY29uY2F0IiwiaWQiLCJhZGQiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9idXR0b25JbWFnZSIsIl9idXR0b25Qcm9maWxlIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9pbnB1dExpc3QiLCJzb21lIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9zdWJtaXRCdXR0b24iLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiQXJyYXkiLCJmcm9tIiwiZG91YmxlRnVuY3Rpb25zIiwiUG9wdXBXaXRoSW1hZ2UiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlckl0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIml0ZW0iLCJwcmVwZW5kIiwiVXNlckluZm8iLCJ1TmFtZSIsInVKb2IiLCJfdU5hbWUiLCJfdUpvYiIsImJ1dHRvbkltYWdlIiwiYnV0dG9uUHJvZmlsZSIsImZvcm1zRWxlbWVudHMiLCJlbmFibGVWYWxpZGF0aW9uIiwibmV3UG9wdXBJbmZvIiwibmFtZUlucHV0Iiwiam9iSW5wdXQiLCJuZXdQb3B1cEltYWdlIiwiYWRkRm9ybUNhcmQiLCJjYXJkIiwicHJldmlld1BvcHVwIiwib3BlbiIsImdlbmVyYXRlQ2FyZCIsImluaXRpYWxTZWN0aW9uIiwic2V0SXRlbSIsImNhcmRFbGVtZW50IiwiaW1hZ2UiLCJyZW5kZXJJdGVtcyIsImdldFVzZXJJbmZvIl0sInNvdXJjZVJvb3QiOiIifQ==